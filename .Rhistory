value = "value", c(R.MM.DML:R.TM.FL, L.MM.DML:L.TM.FL)) %>%
separate(side.nerve.param,
into = c("side", "nerve", "param"),
sep = "\\.") %>%
mutate(side.nerve = paste(side, nerve, sep=".")) %>%
mutate(side.nerve = factor(side.nerve,
levels =
c("R.MM", "R.UM", "R.PM", "R.TM",
"L.TM", "L.PM", "L.UM", "L.MM"))) %>%
filter(param %in% c("CMAP1", "CMAP2", "CMAP3", "CMAP4",
"DML", "Dur1", "Dur2", "Dur3", "Dur4",
"NCV1", "NCV2", "NCV3", "FL")) %>%
mutate(param = factor(param,
levels = c("CMAP1", "CMAP2", "CMAP3", "CMAP4",
"DML", "Dur1", "Dur2", "Dur3", "Dur4",
"NCV1", "NCV2", "NCV3", "FL"))) %>%
select(Date, side.nerve, param, value) %>%
group_by(side.nerve) %>%
mutate(all_na = all(is.na(value))) %>%
filter(all_na == F)
fu_motor_all
levels(fu_motor_all$side.nerve)
fu_motor_all$side.nerve = factor(fu_motor_all$side.nerve)
levels(fu_motor_all$side.nerve)
p = fu_motor_all %>%
group_by(side.nerve) %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)
)
p = p %>%
subplot(nrows = round(length(levels(fu_motor_all$side.nerve))/3), shareY = T, shareX = T,
titleX = F, titleY = T)
p
fu_motor_all = fu_motor_all %>%
mutate(side.nerve = factor(side.nerve)) %>%
filter(param %in% c("CMAP1", "CMAP2", "DML", "Dur1", "Dur2",
"NCV1", "FL")) %>%
mutate(param = factor(param))
fu_motor_all = fu_selected %>%
gather(key = "side.nerve.param",
value = "value", c(R.MM.DML:R.TM.FL, L.MM.DML:L.TM.FL)) %>%
separate(side.nerve.param,
into = c("side", "nerve", "param"),
sep = "\\.") %>%
mutate(side.nerve = paste(side, nerve, sep=".")) %>%
mutate(side.nerve = factor(side.nerve,
levels =
c("R.MM", "R.UM", "R.PM", "R.TM",
"L.TM", "L.PM", "L.UM", "L.MM"))) %>%
filter(param %in% c("CMAP1", "CMAP2", "CMAP3", "CMAP4",
"DML", "Dur1", "Dur2", "Dur3", "Dur4",
"NCV1", "NCV2", "NCV3", "FL")) %>%
mutate(param = factor(param,
levels = c("CMAP1", "CMAP2", "CMAP3", "CMAP4",
"DML", "Dur1", "Dur2", "Dur3", "Dur4",
"NCV1", "NCV2", "NCV3", "FL"))) %>%
select(Date, side.nerve, param, value) %>%
group_by(side.nerve) %>%
mutate(all_na = all(is.na(value))) %>%
filter(all_na == F)
fu_motor_all = fu_motor_all %>%
mutate(side.nerve = factor(side.nerve)) %>%
filter(param %in% c("CMAP1", "CMAP2", "DML", "Dur1", "Dur2",
"NCV1", "FL")) %>%
mutate(param = factor(param))
fu_motor_all = fu_motor_all %>%
filter(param %in% c("CMAP1", "CMAP2", "DML", "Dur1", "Dur2",
"NCV1", "FL")) %>%
mutate(param = factor(param))
fu_motor_all$side.nerve = factor(fu_motor_all$side.nerve)
p = fu_motor_all %>%
group_by(side.nerve) %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)
)
p = p %>%
layout(
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(fu_motor_all$Date),
y0=100, y1=100,
line=list(dash='dot', width=1)))
p = p %>%
subplot(nrows = round(length(levels(fu_motor_all$side.nerve))/3), shareY = T, shareX = T,
titleX = F, titleY = T)
p1 = style(p, traces = 1:length(levels(fu_motor_all$param)), showlegend = T)
p2 = layout(p1, legend = list(font = list(size = 15)))
p2
p = fu_motor_all %>%
group_by(side.nerve) %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)
)
p = p %>%
subplot(nrows = round(length(levels(fu_motor_all$side.nerve))/3), shareY = T, shareX = T,
titleX = F, titleY = T)
p1 = style(p, traces = 1:length(levels(fu_motor_all$param)), showlegend = T)
p2 = layout(p1, legend = list(font = list(size = 15)))
p2
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)) %>%
layout(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)) %>%
layout(
p = fu_motor_all %>%
group_by(side.nerve) %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)) %>%
layout(
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(fu_motor_all$Date),
y0=100, y1=100,
line=list(dash='dot', width=1)))
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)) %>%
layout(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)) %>% layout(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)) %>% layout(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)) %>% layout(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)) %>% layout(
q\
p = fu_motor_all %>%
group_by(side.nerve) %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)) %>% layout(
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(.$Date),
y0=100, y1=100,
line=list(dash='dot', width=1)))
fu_motor_all
range(fu_motor_all)
range(fu_motor_all$Date)
p = fu_motor_all %>%
group_by(side.nerve) %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)
) %>%
layout(
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(.$Date),
y0=100, y1=100,
line=list(dash='dot', width=1)))
subplot(p, nrows = round(len_param/3), shareY = T, shareX = T,
titleX = F, titleY = T)
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(.$Date),
y0=100, y1=100,
line=list(dash='dot', width=1))) %>%
subplot(nrows = round(len_param/3), shareY = T, shareX = T,
titleX = F, titleY = T)
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(.$Date),
y0=100, y1=100,
line=list(dash='dot', width=1))) %>%
subplot(nrows = round(len_param/3), shareY = T, shareX = T,
titleX = F, titleY = T)
p = fu_motor_all %>%
group_by(side.nerve) %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)
) %>%
layout(
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(.$Date),
y0=100, y1=100,
line=list(dash='dot', width=1))) %>%
subplot(nrows = round(len_param/3), shareY = T, shareX = T,
titleX = F, titleY = T)
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(.$Date),
y0=100, y1=100,
line=list(dash='dot', width=1))) %>%
subplot(nrows = 3, shareY = T, shareX = T,
titleX = F, titleY = T)
spg_plot_param = . %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)
) %>%
layout(
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(.$Date),
y0=100, y1=100,
line=list(dash='dot', width=1)))
df_motor_radial_temp = df_motor_radial %>%
group_by(side.nerve) %>%
mutate(all_na = all(is.na(value))) %>%
filter(all_na == F)
df_motor_radial_temp$side.nerve = factor(df_motor_radial_temp$side.nerve)
len_nerve = length(levels(df_motor_radial_temp$side.nerve))
len_param = length(levels(df_motor_radial_temp$param))
p = df_motor_radial_temp %>%
group_by(side.nerve) %>%
do(p = spg_plot_param(.)) %>%
subplot(nrows = round(len_nerve/3), shareY = T, shareX = T,
titleX = F, titleY = T)
p1 = style(p, traces = 1:len_param, showlegend = T)
layout(p1, legend = list(font = list(size = 15)))
runApp('~/Documents/GitHub/NCViewer/ncviewer.R')
spg_plot_param = . %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)
) %>%
layout(
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(~Date),
y0=100, y1=100,
line=list(dash='dot', width=1)))
spg_plot_param = . %>%
plot_ly(x = ~Date, y = ~value, color = ~param,
legendgroup = ~param,
colors = "Dark2") %>%
add_lines(name = ~param, showlegend = F) %>%
add_markers(showlegend = F) %>%
add_annotations(
text = ~unique(side.nerve),
x = 0.5,
y = 1,
yref = "paper",
xref = "paper",
xanchor = "middle",
yanchor = "top",
showarrow = FALSE,
font = list(size = 15)
) %>%
layout(
xaxis = list(
showgrid = T
),
yaxis = list(
showgrid = T
),
shapes=list(type='line', x0= 0, x1= max(~Date),
y0=100, y1=100,
line=list(dash='dot', width=1)))
runApp('~/Documents/GitHub/NCViewer/ncviewer.R')
runApp('~/Documents/GitHub/NCViewer/ncviewer.R')
fu_motor_all$Date
fu_selected = df[df$ID == "1456214", ] %>%
mutate(Date = as.Date(Date, format = "%Y-%m-%d")) %>%
mutate_if(is.numeric, as.integer)
fu_motor_all = fu_selected %>%
gather(key = "side.nerve.param",
value = "value", c(R.MM.DML:R.TM.FL, L.MM.DML:L.TM.FL)) %>%
separate(side.nerve.param,
into = c("side", "nerve", "param"),
sep = "\\.") %>%
mutate(side.nerve = paste(side, nerve, sep=".")) %>%
mutate(side.nerve = factor(side.nerve,
levels =
c("R.MM", "R.UM", "R.PM", "R.TM",
"L.TM", "L.PM", "L.UM", "L.MM"))) %>%
filter(param %in% c("CMAP1", "CMAP2", "CMAP3", "CMAP4",
"DML", "Dur1", "Dur2", "Dur3", "Dur4",
"NCV1", "NCV2", "NCV3", "FL")) %>%
mutate(param = factor(param,
levels = c("CMAP1", "CMAP2", "CMAP3", "CMAP4",
"DML", "Dur1", "Dur2", "Dur3", "Dur4",
"NCV1", "NCV2", "NCV3", "FL"))) %>%
select(Date, side.nerve, param, value) %>%
group_by(side.nerve) %>%
mutate(all_na = all(is.na(value))) %>%
filter(all_na == F)
fu_motor_all$side.nerve = factor(fu_motor_all$side.nerve)
fu_motor_all = fu_motor_all %>%
filter(param %in% c("CMAP1", "CMAP2", "DML", "Dur1", "Dur2",
"NCV1", "FL")) %>%
mutate(param = factor(param))
fu_motor_all$Date
range(fu_motor_all$Date)
runApp('~/Documents/GitHub/NCViewer/ncviewer.R')
fun = function(x){x^2}
fun(4)
df = data.frame()
runApp('~/Documents/GitHub/NCViewer/ncviewer.R')
runApp('~/Documents/GitHub/NCViewer/ncviewer.R')
runApp('~/Documents/GitHub/NCViewer/ncviewer.R')
runApp('~/Documents/GitHub/NCViewer/ncviewer.R')
runApp('~/Documents/GitHub/NCViewer/ncviewer.R')
rsconnect::setAccountInfo(name='yoonhohong',
token='E92037C559F4481EAABBF60313395193',
secret='p3Oa6nPPpmB+3tEBGAb7ROS9DOmC1wagIWAMFeei')
devtools::install_github("rstudio/rsconnect")
rsconnect::setAccountInfo(name='yoonhohong', token='E92037C559F4481EAABBF60313395193', secret='p3Oa6nPPpmB+3tEBGAb7ROS9DOmC1wagIWAMFeei')
install.packages("tidyverse")
install.packages("tidyverse")
install.packages("tidyverse")
install.packages("tidyverse")
q()
version
updateR()
install.packages("installr")
q()
